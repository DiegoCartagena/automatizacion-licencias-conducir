import"./index-DzQnsCzH.js";import{p as F,d as i,Q as $,m as y,q as H,c as B,w as E,o as d,a as e,g as A,t as p,e as u,h as w,F as h,f as I,n as b}from"./app-Qpi9dm6T.js";import{A as V}from"./AppLayout-CnokBy6r.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                  */F({value:{}});const j={class:"min-h-screen bg-gray-800 text-white"},N={class:"max-w-5xl mx-auto py-6"},T={class:"bg-gray-700 p-4 rounded-lg"},Y={class:"flex flex-col items-center"},q={class:"bg-white text-black p-4 rounded-lg shadow-md w-full max-w-md"},z={class:"flex justify-between mb-4"},O={class:"grid grid-cols-7 gap-2 text-center"},P=["onClick"],Q={key:0,class:"mt-6"},G={class:"text-yellow-300"},J={class:"grid grid-cols-4 gap-2 mt-4"},K=["onClick"],te={__name:"Calendar",setup(R){const n=i(new Date().getMonth()),l=i(new Date().getFullYear()),c=i([]),r=i(null),g=i([]),v=$(),m=i(0),f=a=>{n.value+=a,n.value>11?(n.value=0,l.value++):n.value<0&&(n.value=11,l.value--),x()},x=()=>{const a=new Date(l.value,n.value,1).getDay(),t=new Date(l.value,n.value+1,0).getDate();c.value=[];for(let s=0;s<(a===0?6:a-1);s++)c.value.push({day:"",status:"sin asignar"});for(let s=1;s<=t;s++)c.value.push({day:s,date:new Date(l.value,n.value,s),status:s%2===0?"disponible":"reservado"})};x();const D=a=>{r.value=a,S()},S=()=>{g.value=[];for(let s=9;s<14;s++)for(let o=0;o<60;o+=15){const L=`${s.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`;g.value.push({time:L,status:o%2===0?"disponible":"reservado"})}},C=a=>{let t,s,o;if(a instanceof Date)t=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear();else if(typeof a=="string")[t,s,o]=a.split("/");else throw new Error("Formato de fecha no válido");return`${o}-${s}-${t}`},_=y(()=>new Date(l.value,n.value).toLocaleString("es-ES",{month:"long",year:"numeric"})),k=async a=>{console.log(r.value.date.toLocaleDateString("es-ES")+" "+a);const t=await axios.post("/api/edit-solicitud",{id:m.value,fecha_agendada:C(r.value.date.toLocaleDateString("es-ES")),hora_agendada:a});t.data.res&&(v.props.solicitud=t.data.solicitud,window.location.href="/form-salud")},M=y(()=>r.value?r.value.date.toLocaleDateString("es-ES"):"");return H(async()=>{m.value=localStorage.getItem("id_solicitud");const a=await axios.post("/api/edit-solicitud",{id:m.value,step:"seleccionando hora"});a.data.res&&(v.props.solicitud=a.data.solicitud,console.log(v.props))}),(a,t)=>(d(),B(V,null,{default:E(()=>[e("div",j,[t[11]||(t[11]=e("header",{class:"bg-gray-900 py-4 px-8 flex justify-between items-center"},[e("div",{class:"text-xl font-bold text-yellow-300"},"La Florida - Me Importas Tú"),e("div",{class:"flex items-center gap-4"},[e("a",{href:"#",class:"text-sm text-gray-400"},"Volver al menú de aplicaciones"),e("a",{href:"#",class:"text-sm text-gray-400"},"Inicio"),e("a",{href:"#",class:"text-sm text-gray-400"},"Mis horas agendadas")])],-1)),e("main",N,[t[10]||(t[10]=e("section",{class:"bg-gray-700 p-4 rounded-lg mb-6"},[e("h2",{class:"text-lg font-semibold mb-4"},"Información:"),e("div",{class:"space-y-2"},[e("div",{class:"flex items-center gap-2"},[e("span",{class:"w-4 h-4 bg-red-500 rounded-full"}),e("span",null,"Fechas sin cupos disponibles.")]),e("div",{class:"flex items-center gap-2"},[e("span",{class:"w-4 h-4 bg-green-500 rounded-full"}),e("span",null,"Fechas con cupos disponibles.")])])],-1)),e("section",T,[e("div",Y,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold mb-4"},[A(" Agendar Hora para "),e("span",{class:"text-yellow-300"},"Licencia de Conducir")],-1)),e("div",q,[e("div",z,[e("button",{onClick:t[0]||(t[0]=s=>f(-1))},"Mes Anterior"),e("span",null,p(_.value),1),e("button",{onClick:t[1]||(t[1]=s=>f(1))},"Próximo Mes")]),e("div",O,[t[2]||(t[2]=e("span",null,"lun",-1)),t[3]||(t[3]=e("span",null,"mar",-1)),t[4]||(t[4]=e("span",null,"mié",-1)),t[5]||(t[5]=e("span",null,"jue",-1)),t[6]||(t[6]=e("span",null,"vie",-1)),t[7]||(t[7]=e("span",null,"sáb",-1)),t[8]||(t[8]=e("span",null,"dom",-1)),(d(!0),u(h,null,w(c.value,s=>(d(),u("div",{key:s.date,class:b(["p-2 rounded cursor-pointer",{"bg-red-500 text-white":s.status==="reservado","bg-green-500 text-white":s.status==="disponible","bg-gray-300 text-gray-600":s.status==="sin asignar"}]),onClick:o=>D(s)},p(s.day),11,P))),128))])]),r.value?(d(),u("div",Q,[e("h3",G,"Horarios para "+p(M.value),1),e("div",J,[(d(!0),u(h,null,w(g.value,s=>(d(),u("div",{key:s.time,class:b(["p-2 text-center rounded",{"bg-red-500 text-white":s.status==="reservado","bg-green-500 text-white":s.status==="disponible"}]),onClick:o=>k(s.time)},p(s.time),11,K))),128))])])):I("",!0)])])])])]),_:1}))}};export{te as default};
